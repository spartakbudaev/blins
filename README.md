# Блинная башня

Игра "Блинная башня" с интеграцией Telegram бота и веб-приложения.

## Описание

"Блинная башня" - это игра, где нужно построить как можно более высокую башню из блинов. Игра интегрирована с Telegram ботом и может быть размещена на хостинге с поддержкой HTTPS.

## Требования

- Python 3.9+
- Telegram бот (создается через [@BotFather](https://t.me/BotFather))
- Аккаунт на [Heroku](https://www.heroku.com/) или [Render](https://render.com/)

## Локальный запуск

1. Клонируйте репозиторий:
   ```
   git clone <url-репозитория>
   cd <директория-проекта>
   ```

2. Создайте виртуальное окружение и установите зависимости:
   ```
   python -m venv venv
   source venv/bin/activate  # для Linux/Mac
   venv\Scripts\activate     # для Windows
   pip install -r requirements.txt
   ```

3. Создайте файл `.env` и добавьте в него токен вашего бота:
   ```
   BOT_TOKEN=ваш_токен_бота
   ```

4. Запустите локальный веб-сервер:
   ```
   python app.py
   ```

5. В отдельном терминале запустите бота:
   ```
   python webapp_bot.py
   ```

## Размещение на Heroku

1. Создайте аккаунт на [Heroku](https://www.heroku.com/) (если у вас его еще нет)

2. Установите [Heroku CLI](https://devcenter.heroku.com/articles/heroku-cli)

3. Войдите в аккаунт Heroku через CLI:
   ```
   heroku login
   ```

4. Запустите скрипт настройки Heroku:
   ```
   ./setup_heroku.sh
   ```

5. Следуйте инструкциям скрипта для создания приложения и настройки переменных окружения.

6. Запустите бота для работы с Heroku:
   ```
   python heroku_bot.py
   ```

## Размещение на Render

1. Создайте аккаунт на [Render](https://render.com/) (если у вас его еще нет)

2. Запустите скрипт настройки Render:
   ```
   ./setup_render.sh
   ```

3. Следуйте инструкциям скрипта для настройки деплоя:
   - Создайте репозиторий на GitHub или GitLab
   - Отправьте код в репозиторий
   - В Render Dashboard выберите 'Blueprint' и укажите ваш репозиторий
   - Render автоматически обнаружит файл render.yaml и создаст сервисы
   - Добавьте переменную окружения BOT_TOKEN в настройках сервиса бота

4. После деплоя, скопируйте URL веб-сервиса и добавьте его в .env файл:
   ```
   RENDER_APP_URL=https://ваш-сервис.onrender.com
   ```

5. Запустите бота для работы с Render:
   ```
   python render_bot.py
   ```

## Структура проекта

- `app.py` - Flask-приложение для локального запуска
- `webapp_bot.py` - Telegram бот для локального запуска
- `heroku_bot.py` - Telegram бот для работы с приложением на Heroku
- `render_bot.py` - Telegram бот для работы с приложением на Render
- `render.yaml` - Конфигурация для деплоя на Render
- `setup_heroku.sh` - Скрипт для настройки деплоя на Heroku
- `setup_render.sh` - Скрипт для настройки деплоя на Render
- `webapp/` - Директория с веб-приложением
  - `index.html` - Главная страница
  - `js/` - JavaScript файлы
  - `css/` - CSS файлы

## Преимущества Render

- Бесплатный план с поддержкой HTTPS
- Автоматический деплой из Git-репозитория
- Простая настройка через Blueprint (render.yaml)
- Отсутствие "засыпания" приложения (в отличие от бесплатного плана Heroku)
- Встроенный мониторинг и логи

## Лицензия

MIT 